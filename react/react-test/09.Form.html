<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <title>Hello React!</title>
    <script type="text/javascript" src="../js/react.development.js"></script>
    <script type="text/javascript" src="../js/react-dom.development.js"></script>
    <script type="text/javascript" src="../js/prop-types.js"></script>
    <script type="text/javascript" src="../js/babel.min.js"></script>
</head>

<body>

    <div id="example2"></div>
    <script type="text/babel">
      /*
  需求: 自定义包含表单的组件
    1. 界面如下所示
    2. 输入用户名密码后, 点击登陆提示输入信息
    3. 不提交表单
  */

    // 非受控组件 操作的原生DOM
    /* class Form extends React.Component {
        
        constructor(props) {
            super(props);
            this.usernameRef = React.createRef();
            this.passwordRef = React.createRef();
        }
         
        handleClick = (e) => {
            //禁止事件的默认方法
            e.preventDefault();

            //手机数据
            const password = this.passwordRef.current.value;
            const username = this.usernameRef.current.value;
            alert(password,username);
        }  
        render() {
           return <form action="/" onSubmit={this.handleClick}>
                用户名: <input type="text" name='username' ref={this.usernameRef} /> 
                密  码: <input type="text" name='password' ref={this.passwordRef} />
                <input type="submit" value="提交" />
            </form>
        } 
    } */

    //受控组件 操作的虚拟DOM
    class Form extends React.Component {
        
        constructor(props) {
            super(props);
            this.state={
                username: '',
                password: ''
            }
        }
         
        handleClick = (e) => {
            //禁止事件的默认方法
            e.preventDefault();

            //收集数据
            const {username, password} = this.state;    
            alert(`用户名：${username}  密码：${password}`);
        }

        usernameChange = (name) => {
          return (e) => {
              this.setState({
                  username: e.target.value
              })
          }  
        } 
        passwordChange = (name) => {
          return (e) => {
              this.setState({
                  password: e.target.value
              })
          }  
        } 
        //组和方法
        /* composeChange = (name) => {
            return (e) =>{
                this.setState({
                    [name]: e.target.value
                })
            }
        }  */  
        /* render() {
           return <form action="/" onSubmit={this.handleClick}>
                用户名: <input type="text" name='username'onChange={this.composeChange('username')} /> 
                密  码: <input type="text" name='password' onChange={this.composeChange('password')}/>
                <input type="submit" value="提交" />
            </form>
        }  */
        render() {
           return <form action="/" onSubmit={this.handleClick}>
                用户名: <input type="text" name='username'onChange={this.usernameChange('username')} /> 
                密  码: <input type="text" name='password' onChange={this.passwordChange('password')}/>
                <input type="submit" value="提交" />
            </form>
        } 
    }    
    //渲染组件
    ReactDOM.render(<Form />, document.getElementById('example2'));

    </script>

</body>

</html>